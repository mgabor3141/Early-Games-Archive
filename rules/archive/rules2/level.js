var map = [
	[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0],
	[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0],
	[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0],
	[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,1,0,0,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0],
	[1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,1,1,1,0,1,1,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,0,0,1,1,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0],
	[1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,1,0,0,0,0,0,1,0,1,0,0,0],
	[1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0],
	[1,1,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	[1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	[1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
	[1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];
/*										 |									 |									 |									 |									 |									 |									 |									 |
	0 = air				coordinates: 	x = (col-6)/2
	1 = wall							y = ln-2
	2 = death
	3 = invisible wall
	
*/

buttons[0] = new Button(28,2,false);
scripts[0] = new Script();
scripts[0].tick = function () {
	if (scripts[0].t == 0) {
		buttons[0].toggle();
		map[5][18] = 3;
		map[6][18] = 3;
		drawbg();
	}
	scripts[0].t++;
	if (scripts[0].t == 40) {
		map[5][18] = 0;
		map[6][18] = 0;
		scripts[0].stop();
	}
}
scripts[0].render = function () {
	ctx.fillStyle = "#000";
	ctx.fillRect(40*(18-currenttile*18)-20, 40*5-scripts[0].t, 40, 40);
	ctx.fillRect(40*(18-currenttile*18)-20, 40*6+scripts[0].t, 40, 40);
}

buttons[1] = new Button(113,7,false);
scripts[1] = new Script();
scripts[1].tick = function () {
	if (scripts[1].t == 0) {
		buttons[1].toggle();
		map[10][125] = 3;
		map[9][125] = 3;
		map[10][126] = 3;
		map[9][126] = 3;
		drawbg();
	}
	scripts[1].t++;
	if (scripts[1].t == 80) {
		map[10][125] = 0;
		map[9][125] = 0;
		map[10][126] = 0;
		map[9][126] = 0;
		scripts[1].stop();
	}
}
scripts[1].render = function () {
	ctx.fillStyle = "#000";
	ctx.fillRect(40*(125-currenttile*18)-20, 40*9-scripts[1].t, 80, 80);
}

buttons[2] = new Button(53,8,false);
scripts[2] = new Script();
scripts[2].tick = function () {
	if (scripts[2].t == 0) {
		buttons[2].toggle();
		checkpoint = [53*40+20,10*40];
		map[8][51] = 3;
		map[8][50] = 3;
		map[9][51] = 3;
		map[5][50] = 0;
		map[6][51] = 0;
		map[5][51] = 0;
		map[10][47] = 0;
		map[10][48] = 0;
		map[10][49] = 0;
		map[9][49] = 3;
		map[10][43] = 0;
		map[10][44] = 0;
		map[10][45] = 0;
		drawbg();
	} else
	if (scripts[2].t == 20) {
		map[8][51] = 0;
		map[8][50] = 1;
		map[9][51] = 0;
		map[4][50] = 1;
		map[6][52] = 1;
		map[5][52] = 1;

		map[5][38] = 1;
		map[9][40] = 1;

		map[5][36] = 1;
		map[6][36] = 1;
		map[7][36] = 1;
		drawbg();
	} else
	if (scripts[2].t == 30) {
		map[8][50] = 3;
		map[7][50] = 3;
		map[6][52] = 0;
		map[5][52] = 0;
		drawbg();
	} else
	if (scripts[2].t == 50) {
		map[8][50] = 0;
		map[7][50] = 1;
		map[7][52] = 1;
		map[4][52] = 1;

		map[5][39] = 1;
		drawbg();
	} else
	if (scripts[2].t == 120) {
		map[7][47] = 1;
		map[7][48] = 1;
		map[7][49] = 1;
		map[9][49] = 0;
		map[7][43] = 1;
		map[7][44] = 1;
		map[7][45] = 1;
		drawbg();
		scripts[2].stop();
	}
	scripts[2].t++;
}
scripts[2].render = function () {
	ctx.fillStyle = "#000";
	if (scripts[2].t <= 20) {
		ctx.fillRect(40*(51-currenttile*18)-scripts[2].t*2-20, 40*8, 40, 40);
		ctx.fillRect(40*(51-currenttile*18)+scripts[2].t*2-20, 40*6, 40, 40);
		ctx.fillRect(40*(51-currenttile*18)+scripts[2].t*2-20, 40*5, 40, 40);
		ctx.fillRect(40*(51-currenttile*18)-20, 40*9+scripts[2].t*2, 40, 40);
		ctx.fillRect(40*(50-currenttile*18)-20, 40*5-scripts[2].t*2, 40, 40);

		ctx.fillRect(40*(38-currenttile*18)-20, 40*4+scripts[2].t*2, 40, 40);
		ctx.fillRect(40*(40-currenttile*18)-20, -40+scripts[2].t*20, 40, 40);

		ctx.fillRect(40*(35-currenttile*18)+scripts[2].t*2-20, 40*5, 40, 120);
	} else
	if (scripts[2].t <= 50 && scripts[2].t >= 30) {
		ctx.fillRect(40*(50-currenttile*18)-20, 40*8-scripts[2].t*2+60, 40, 40);
		ctx.fillRect(40*(52-currenttile*18)-20, 40*6+scripts[2].t*2-60, 40, 40);
		ctx.fillRect(40*(52-currenttile*18)-20, 40*5-scripts[2].t*2+60, 40, 40);

		ctx.fillRect(40*(38-currenttile*18)-20+scripts[2].t*2-60, 40*5, 40, 40);
	}

	if (scripts[2].t <= 120) {
		ctx.fillRect(40*(47-currenttile*18)-20, 40*10-scripts[2].t, 120, 40);
		ctx.fillRect(40*(43-currenttile*18)-20, 40*10-scripts[2].t, 120, 40);
	}
}

buttons[3] = new Button(37,0,false);
scripts[3] = new Script();
scripts[3].tick = function () {
	if (scripts[3].t == 0) {
		buttons[3].toggle();
		posx = 1500;
		map[4][37] = 0;
		map[8][37] = 0;
		drawbg();
	} else
	if (scripts[3].t == 10) {
		map[6][37] = 1;
		map[7][37] = 1;
		drawbg();
	} else
	if (scripts[3].t == 15) {
		map[6][37] = 0;
		map[7][37] = 0;
		map[9][37] = 0;
		map[10][37] = 0;
		drawbg();
	} else
	if (scripts[3].t == 20) {
		map[6][38] = 1;
		map[7][38] = 1;
		drawbg();
	} else
	if (scripts[3].t == 160) {
		map[9][38] = 3;
		map[10][38] = 3;
		map[10][39] = 0;
		drawbg();
	} else
	if (scripts[3].t == 200) {
		map[9][38] = 0;
		map[10][38] = 0;
		drawbg();
	} else
	if (scripts[3].t == 220) {
		map[5][53] = 3;
		map[5][54] = 3;
		map[6][53] = 3;
		map[6][54] = 3;
		drawbg();
	} else
	if (scripts[3].t == 260) {
		map[5][53] = 0;
		map[5][54] = 0;
		map[6][53] = 0;
		map[6][54] = 0;
		drawbg();
		scripts[3].stop();
	}
	scripts[3].t++;
}
scripts[3].render = function () {
	ctx.fillStyle = "#000";
	if (scripts[3].t <= 10) {
		ctx.fillRect(40*(37-currenttile*18)-20, 40*4+scripts[3].t*8, 40, 40);
		ctx.fillRect(40*(37-currenttile*18)-20, 40*8-scripts[3].t*4, 40, 40);
	} else
	if (scripts[3].t <= 20 && scripts[3].t >= 15) {
		ctx.fillRect(40*(37-currenttile*18)-20+scripts[3].t*8-120, 40*6, 40, 40);
		ctx.fillRect(40*(37-currenttile*18)-20+scripts[3].t*8-120, 40*7, 40, 40);
		ctx.fillRect(40*(37-currenttile*18)-20+scripts[3].t*8-120, 40*9, 40, 40);
		ctx.fillRect(40*(37-currenttile*18)-20+scripts[3].t*8-120, 40*10, 40, 40);
	} else
	if (scripts[3].t <= 200 && scripts[3].t >= 160) {
		ctx.fillRect(40*(38-currenttile*18)-20, 40*9-scripts[3].t+160, 40, 40);
		ctx.fillRect(40*(38-currenttile*18)-20, 40*10+scripts[3].t-160, 80, 40);
	} else
	if (scripts[3].t <= 260 && scripts[3].t >= 220) {
		ctx.fillRect(40*(53-currenttile*18)-20, 40*5-scripts[3].t+220, 80, 40);
		ctx.fillRect(40*(53-currenttile*18)-20, 40*6+scripts[3].t-220, 80, 40);
	}
}